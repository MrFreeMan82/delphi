object frmNabor: TfrmNabor
  Left = 659
  Top = 233
  Width = 838
  Height = 451
  Caption = #1053#1072#1073#1086#1088' '#1086#1073#1098#1103#1074#1083#1077#1085#1080#1081
  Color = clBtnFace
  Font.Charset = DEFAULT_CHARSET
  Font.Color = clWindowText
  Font.Height = -11
  Font.Name = 'MS Sans Serif'
  Font.Style = []
  OldCreateOrder = False
  OnShow = FormShow
  PixelsPerInch = 96
  TextHeight = 13
  object Panel20: TPanel
    Left = 0
    Top = 379
    Width = 822
    Height = 34
    Align = alBottom
    BevelOuter = bvNone
    TabOrder = 0
    object Shape84: TShape
      Left = 0
      Top = 0
      Width = 822
      Height = 1
      Align = alTop
      Pen.Color = clBtnShadow
    end
    object btShowObjavOrder: TBitBtn
      Left = 519
      Top = 6
      Width = 210
      Height = 25
      Caption = #1055#1086#1088#1103#1076#1086#1082' '#1086#1073#1098#1103#1074#1083#1077#1085#1080#1081' '#1074' '#1088#1091#1073#1088#1080#1082#1077
      TabOrder = 0
      OnClick = btShowObjavOrderClick
      Glyph.Data = {
        F6000000424DF60000000000000076000000280000000E000000100000000100
        04000000000080000000CE0E0000D80E00001000000000000000000000000000
        80000080000000808000800000008000800080800000C0C0C000808080000000
        FF0000FF000000FFFF00FF000000FF00FF00FFFF0000FFFFFF00999999999999
        9900991111199994990099199999999499009991999999444900999911999944
        4900999999199444440099199919999499009991119999949900999999999994
        9900999444999994990099994999999499009999499999949900999949999994
        9900999449999994990099994999999499009999499999949900}
    end
    object btFindSdelkaNabor: TBitBtn
      Left = 305
      Top = 6
      Width = 207
      Height = 25
      Caption = #1055#1086#1080#1089#1082' '#1076#1083#1103' '#1074#1085#1077#1089#1077#1085#1080#1103' '#1080#1079#1084#1077#1085#1077#1085#1080#1081
      Font.Charset = DEFAULT_CHARSET
      Font.Color = clWindowText
      Font.Height = -11
      Font.Name = 'Tahoma'
      Font.Style = []
      ParentFont = False
      TabOrder = 1
      OnClick = btFindSdelkaNaborClick
      Glyph.Data = {
        F6000000424DF600000000000000760000002800000010000000100000000100
        0400000000008000000000000000000000001000000000000000000000000000
        80000080000000808000800000008000800080800000C0C0C000808080000000
        FF0000FF000000FFFF00FF000000FF00FF00FFFF0000FFFFFF00333333333333
        3333300000333330000030F000333330F00030F000333330F000300000003000
        0000300F000000F00000300F000300F00000300F000300F00000330000000000
        00033330F00030F000333330000030000033333300033300033333330F03330F
        0333333300033300033333333333333333333333333333333333}
    end
    object btRefreshNabor: TBitBtn
      Left = 155
      Top = 6
      Width = 144
      Height = 25
      Caption = #1054#1073#1085#1086#1074#1080#1090#1100
      Font.Charset = DEFAULT_CHARSET
      Font.Color = clWindowText
      Font.Height = -11
      Font.Name = 'Tahoma'
      Font.Style = []
      ParentFont = False
      TabOrder = 2
      OnClick = btRefreshNaborClick
      Glyph.Data = {
        F6000000424DF600000000000000760000002800000010000000100000000100
        0400000000008000000000000000000000001000000000000000000000000000
        80000080000000808000800000008000800080800000C0C0C000808080000000
        FF0000FF000000FFFF00FF000000FF00FF00FFFF0000FFFFFF00FFFFF0FFFFFF
        FFFFFFFFF00FFFFFFFFFFFF88000FFFFFFFFFF0000000FFFFFFFF0000000FF80
        FFFF808FF00FFF000FFF00FFF0FFFFF008FF00FFFFFFFFFF00FF00FFFFFFFFFF
        00FF800FFFFF0FFF00FFF000FFF00FF808FFFF08FF0000000FFFFFFFF0000000
        FFFFFFFFFF00088FFFFFFFFFFFF00FFFFFFFFFFFFFFF0FFFFFFF}
    end
    object btEditObjav: TBitBtn
      Left = 5
      Top = 6
      Width = 144
      Height = 25
      Caption = #1042#1085#1077#1089#1090#1080' '#1090#1077#1082#1089#1090
      Font.Charset = DEFAULT_CHARSET
      Font.Color = clWindowText
      Font.Height = -11
      Font.Name = 'Tahoma'
      Font.Style = []
      ParentFont = False
      TabOrder = 3
      OnClick = btEditObjavClick
      Glyph.Data = {
        F6000000424DF600000000000000760000002800000010000000100000000100
        0400000000008000000000000000000000001000000000000000000000000000
        80000080000000808000800000008000800080800000C0C0C000808080000000
        FF0000FF000000FFFF00FF000000FF00FF00FFFF0000FFFFFF00DDDDCCDDCDDD
        DDDDDDDCDDCCDCDDDDDDCDC0000DDDCDDDDDDCD08830DDDDDDDDDDD08B330DDD
        DDDDDDD0BBB330DDDDDDDDDD0BBB330DDDDDDDDDD0BBB330DDDDDDDDDD0BBB33
        0DDDDDDDDDD0BBB330DDDDDDDDDD0BB3000DDDDDDDDDD0B0330DDDDDDDDDDD00
        B30DDDDDDDDDDDD000DDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDD}
    end
  end
  object Panel18: TPanel
    Left = 0
    Top = 0
    Width = 822
    Height = 35
    Align = alTop
    BevelOuter = bvNone
    TabOrder = 1
    object Shape79: TShape
      Left = 0
      Top = 34
      Width = 822
      Height = 1
      Align = alBottom
      Pen.Color = clBtnShadow
    end
    object Label56: TLabel
      Left = 8
      Top = 10
      Width = 20
      Height = 13
      Caption = #1050#1086#1076
      Font.Charset = DEFAULT_CHARSET
      Font.Color = clWindowText
      Font.Height = -11
      Font.Name = 'Tahoma'
      Font.Style = []
      ParentFont = False
    end
    object Label63: TLabel
      Left = 118
      Top = 10
      Width = 35
      Height = 13
      Caption = #1043#1072#1079#1077#1090#1072
    end
    object edSearchNabor: TDBEditEh
      Left = 33
      Top = 7
      Width = 70
      Height = 19
      AlwaysShowBorder = True
      EditButtons = <>
      Font.Charset = DEFAULT_CHARSET
      Font.Color = clWindowText
      Font.Height = -11
      Font.Name = 'Tahoma'
      Font.Style = []
      Flat = True
      ParentFont = False
      TabOrder = 0
      Visible = True
      OnKeyPress = edSearchNaborKeyPress
    end
    object cbSdelkaNaborGazeta: TDBLookupComboboxEh
      Left = 158
      Top = 7
      Width = 145
      Height = 19
      AlwaysShowBorder = True
      EditButtons = <>
      Flat = True
      KeyField = 'GZ_ID'
      ListField = 'GZ_NAME'
      ListSource = data.dsGazeta
      TabOrder = 1
      Visible = True
    end
    object Panel1: TPanel
      Left = 464
      Top = 2
      Width = 184
      Height = 27
      TabOrder = 2
      Visible = False
      object cbSdelkaNaborFiltered: TCheckBox
        Left = 8
        Top = 6
        Width = 57
        Height = 17
        Caption = #1060#1080#1083#1100#1090#1088
        TabOrder = 0
      end
      object cbObjavBeregFilter: TComboBox
        Left = 68
        Top = 3
        Width = 112
        Height = 21
        Style = csDropDownList
        ItemHeight = 13
        ItemIndex = 0
        TabOrder = 1
        Text = #1055#1088#1072#1074#1086#1073#1077#1088#1077#1078#1085#1099#1077
        Items.Strings = (
          #1055#1088#1072#1074#1086#1073#1077#1088#1077#1078#1085#1099#1077
          #1051#1077#1074#1086#1073#1077#1088#1077#1078#1085#1099#1077)
      end
      object btSetBereg: TBitBtn
        Left = 183
        Top = 3
        Width = 25
        Height = 21
        Caption = '>>'
        TabOrder = 2
        Visible = False
      end
      object cbAgentForNabor: TDBLookupComboBox
        Left = 211
        Top = 3
        Width = 153
        Height = 21
        KeyField = 'AG_ID'
        ListField = 'AG_NAME'
        ListSource = publData.dsAgent
        TabOrder = 3
        Visible = False
      end
    end
    object btFilterNaborSdelkas: TBitBtn
      Left = 308
      Top = 6
      Width = 73
      Height = 21
      Caption = #1055#1086#1082#1072#1079#1072#1090#1100
      TabOrder = 3
      OnClick = btFilterNaborSdelkasClick
    end
  end
  object grSdelkaForNabor: TDBGridEh
    Left = 0
    Top = 35
    Width = 822
    Height = 344
    Align = alClient
    AutoFitColWidths = True
    DataSource = dsObjavForNabor
    Flat = True
    Font.Charset = DEFAULT_CHARSET
    Font.Color = clWindowText
    Font.Height = -11
    Font.Name = 'Tahoma'
    Font.Style = []
    FooterColor = clWindow
    FooterFont.Charset = DEFAULT_CHARSET
    FooterFont.Color = clWindowText
    FooterFont.Height = -11
    FooterFont.Name = 'Tahoma'
    FooterFont.Style = []
    Options = [dgTitles, dgIndicator, dgColumnResize, dgColLines, dgRowLines, dgTabs, dgRowSelect, dgAlwaysShowSelection, dgConfirmDelete, dgCancelOnExit]
    OptionsEh = [dghHighlightFocus, dghClearSelection]
    ParentFont = False
    ReadOnly = True
    TabOrder = 2
    TitleFont.Charset = DEFAULT_CHARSET
    TitleFont.Color = clWindowText
    TitleFont.Height = -11
    TitleFont.Name = 'Tahoma'
    TitleFont.Style = [fsBold]
    OnDblClick = grSdelkaForNaborDblClick
    OnDrawColumnCell = grSdelkaForNaborDrawColumnCell
    OnKeyPress = grSdelkaForNaborKeyPress
    Columns = <
      item
        EditButtons = <>
        FieldName = 'SR_IS_CURRENT_ISSUE'
        Footers = <>
        Title.Font.Charset = DEFAULT_CHARSET
        Title.Font.Color = clWindowText
        Title.Font.Height = -11
        Title.Font.Name = 'Tahoma'
        Title.Font.Style = []
        Width = 58
      end
      item
        EditButtons = <>
        FieldName = 'RB_IS_LOCKABLE'
        Footers = <>
        Title.Font.Charset = DEFAULT_CHARSET
        Title.Font.Color = clWindowText
        Title.Font.Height = -11
        Title.Font.Name = 'Tahoma'
        Title.Font.Style = []
        Width = 59
      end
      item
        EditButtons = <>
        FieldName = 'sd_num'
        Footers = <>
        Title.Caption = #1053#1086#1084#1077#1088
        Title.Font.Charset = DEFAULT_CHARSET
        Title.Font.Color = clWindowText
        Title.Font.Height = -11
        Title.Font.Name = 'Tahoma'
        Title.Font.Style = []
        Width = 65
      end
      item
        EditButtons = <>
        FieldName = 'AG_NAME'
        Footers = <>
        Title.Font.Charset = DEFAULT_CHARSET
        Title.Font.Color = clWindowText
        Title.Font.Height = -11
        Title.Font.Name = 'Tahoma'
        Title.Font.Style = []
        Width = 108
      end
      item
        EditButtons = <>
        FieldName = 'GZ_NAME_SHORT'
        Footers = <>
        Title.Font.Charset = DEFAULT_CHARSET
        Title.Font.Color = clWindowText
        Title.Font.Height = -11
        Title.Font.Name = 'Tahoma'
        Title.Font.Style = []
        Width = 40
      end
      item
        EditButtons = <>
        FieldName = 'FM_NAME'
        Footers = <>
        Title.Font.Charset = DEFAULT_CHARSET
        Title.Font.Color = clWindowText
        Title.Font.Height = -11
        Title.Font.Name = 'Tahoma'
        Title.Font.Style = []
        Width = 44
      end
      item
        EditButtons = <>
        FieldName = 'RB_NAME_SHORT'
        Footers = <>
        Title.Font.Charset = DEFAULT_CHARSET
        Title.Font.Color = clWindowText
        Title.Font.Height = -11
        Title.Font.Name = 'Tahoma'
        Title.Font.Style = []
        Width = 87
      end
      item
        EditButtons = <>
        FieldName = 'PODACHA_NUMS'
        Footers = <>
        Title.Font.Charset = DEFAULT_CHARSET
        Title.Font.Color = clWindowText
        Title.Font.Height = -11
        Title.Font.Name = 'Tahoma'
        Title.Font.Style = []
        Width = 132
      end
      item
        EditButtons = <>
        FieldName = 'OB_COMMENT'
        Footers = <>
        Title.Font.Charset = DEFAULT_CHARSET
        Title.Font.Color = clWindowText
        Title.Font.Height = -11
        Title.Font.Name = 'Tahoma'
        Title.Font.Style = []
        Width = 182
      end>
  end
  object qryObjavForNabor: TSQLQuery
    MaxBlobSize = -1
    Params = <
      item
        DataType = ftInteger
        Name = 'GZ_ID'
        ParamType = ptInput
        Value = 1
      end
      item
        DataType = ftInteger
        Name = 'GZ_ID'
        ParamType = ptInput
      end>
    SQL.Strings = (
      'select'
      '      SD.sd_num'
      '    , OBN.AG_ID'
      '    , OBN.SD_ID'
      '    , OBN.OB_ID'
      '    , case when obn.OB_TYPE = 1 then OB.OB_STATE'
      '           when obn.OB_TYPE = 2 then o.OB_STATE'
      '           when obn.OB_TYPE = 3 then o.OB_STATE_TXT'
      '      end as ob_state'
      '    , case when obn.OB_TYPE = 1 then OB.OB_COMMENT'
      '           when obn.OB_TYPE = 2 then o.OBJAV_COMMENT'
      '           when obn.OB_TYPE = 3 then o.OBJAV_COMMENT'
      '      end as ob_comment'
      '    , SD.CU_ID'
      '    , AG.AG_NAME'
      '    , AG.AG_IS_REMOTE'
      '    , OBN.AG_ID || '#39'-'#39' || OBN.SD_ID as SD_ID_COMPOUND'
      '    , case when obn.OB_TYPE = 1 then RB.RB_NAME_SHORT'
      '           when obn.OB_TYPE = 2 then obr.RB_NAME_SHORT'
      '           when obn.OB_TYPE = 3 then obr.RB_NAME_SHORT'
      '      end as RB_NAME_SHORT'
      '    , case when obn.OB_TYPE = 1 then FM.FM_NAME'
      '           when obn.OB_TYPE = 2 then ofr.FM_NAME'
      '           when obn.OB_TYPE = 3 then ofr.FM_NAME'
      '      end as FM_NAME'
      '    , SD.GZ_ID'
      '    , GZ.GZ_NAME_SHORT'
      '    , SPN.PODACHA_NUMS'
      '    , RBL.RB_IS_LOCKABLE'
      '    , ('
      '        select count(*)'
      '        from PODACHA pd'
      '        where       pd.AG_ID = sd.AG_ID'
      '                and pd.SD_ID = sd.SD_ID'
      '                and pd.IS_ID = ('
      '                    select pm.PM_CURRENT_ISSUE_SR'
      '                    from PARAMS pm'
      '                )'
      '      ) as SR_IS_CURRENT_ISSUE'
      '     , OBN.OB_TYPE'
      'from'
      '    OBJAV_LIST_FOR_NABOR(:GZ_ID) OBN'
      ''
      '    left join OBJAV OB'
      
        '    on (OBN.AG_ID = OB.AG_ID and OBN.SD_ID=OB.SD_ID and OBN.OB_I' +
        'D=OB.OB_ID)'
      ''
      '    left join OBJAVLENIE o on (o.OBJAV_ID = obn.OB_ID)'
      '    left join rubrika obr on (obr.RB_ID = o.RB_ID)'
      '    left join format ofr on (ofr.FM_ID = o.FM_ID)'
      ''
      '    left join SDELKA SD'
      '    on (OBN.AG_ID = SD.AG_ID and OBN.SD_ID=SD.SD_ID)'
      ''
      '    left join AGENT AG'
      '    on (OBN.AG_ID = AG.AG_ID)'
      ''
      '    left join RUBRIKA RB'
      '    on (OB.RB_ID = RB.RB_ID)'
      ''
      '    left join RUBRIKA RBL'
      
        '    on (OB.RB_ID = RBL.RB_ID and OB.OB_IS_ACTIVE = 1 and OB.FM_I' +
        'D <> 14)'
      ''
      '    left join FORMAT FM'
      '    on (OB.FM_ID = FM.FM_ID)'
      ''
      '    left join GAZETA GZ'
      '    on (GZ.GZ_ID = :GZ_ID)'
      ''
      '    left join SDELKA_PODACHA_NUMS(OBN.AG_ID, OBN.SD_ID) SPN'
      '    on (OBN.SD_ID = SPN.SD_ID)'
      'order by'
      '  obn.OB_TYPE desc')
    SQLConnection = data.connection
    Left = 192
    Top = 64
    object qryObjavForNaborAG_ID: TIntegerField
      FieldName = 'AG_ID'
      ProviderFlags = [pfInUpdate, pfInWhere, pfInKey]
    end
    object qryObjavForNaborSD_ID: TIntegerField
      FieldName = 'SD_ID'
      ProviderFlags = [pfInUpdate, pfInWhere, pfInKey]
    end
    object qryObjavForNaborOB_ID: TIntegerField
      FieldName = 'OB_ID'
      ProviderFlags = [pfInUpdate, pfInWhere, pfInKey]
    end
    object qryObjavForNaborOB_STATE: TSmallintField
      FieldName = 'OB_STATE'
    end
    object qryObjavForNaborOB_COMMENT: TStringField
      FieldName = 'OB_COMMENT'
      Size = 127
    end
    object qryObjavForNaborAG_NAME: TStringField
      FieldName = 'AG_NAME'
      Size = 128
    end
    object qryObjavForNaborAG_IS_REMOTE: TSmallintField
      FieldName = 'AG_IS_REMOTE'
    end
    object qryObjavForNaborSD_ID_COMPOUND: TStringField
      FieldName = 'SD_ID_COMPOUND'
      Size = 23
    end
    object qryObjavForNaborRB_NAME_SHORT: TStringField
      FieldName = 'RB_NAME_SHORT'
      Size = 64
    end
    object qryObjavForNaborFM_NAME: TStringField
      FieldName = 'FM_NAME'
      Size = 128
    end
    object qryObjavForNaborGZ_NAME_SHORT: TStringField
      FieldName = 'GZ_NAME_SHORT'
      Size = 64
    end
    object qryObjavForNaborPODACHA_NUMS: TStringField
      FieldName = 'PODACHA_NUMS'
      Size = 128
    end
    object qryObjavForNaborCU_ID: TIntegerField
      FieldName = 'CU_ID'
      ProviderFlags = []
    end
    object qryObjavForNaborGZ_ID: TSmallintField
      FieldName = 'GZ_ID'
    end
    object qryObjavForNaborRB_IS_LOCKABLE: TSmallintField
      DisplayLabel = #1058#1077#1082'. '#8470' '#1057#1058
      FieldName = 'RB_IS_LOCKABLE'
      ProviderFlags = []
    end
    object qryObjavForNaborSR_IS_CURRENT_ISSUE: TIntegerField
      FieldName = 'SR_IS_CURRENT_ISSUE'
      ProviderFlags = []
    end
    object qryObjavForNaborsd_num: TStringField
      FieldName = 'sd_num'
      Size = 64
    end
    object qryObjavForNaborOB_TYPE: TIntegerField
      FieldName = 'OB_TYPE'
    end
  end
  object prvObjavForNabor: TDataSetProvider
    DataSet = qryObjavForNabor
    Left = 224
    Top = 64
  end
  object cdsObjavForNabor: TClientDataSet
    Aggregates = <>
    Params = <>
    ProviderName = 'prvObjavForNabor'
    ReadOnly = True
    Left = 256
    Top = 64
    object cdsObjavForNaborAG_ID: TIntegerField
      FieldName = 'AG_ID'
      ProviderFlags = [pfInUpdate, pfInWhere, pfInKey]
    end
    object cdsObjavForNaborSD_ID: TIntegerField
      FieldName = 'SD_ID'
      ProviderFlags = [pfInUpdate, pfInWhere, pfInKey]
    end
    object cdsObjavForNaborOB_ID: TIntegerField
      FieldName = 'OB_ID'
      ProviderFlags = [pfInUpdate, pfInWhere, pfInKey]
    end
    object cdsObjavForNaborOB_STATE: TSmallintField
      FieldName = 'OB_STATE'
    end
    object cdsObjavForNaborAG_NAME: TStringField
      DisplayLabel = #1040#1075#1077#1085#1090
      FieldName = 'AG_NAME'
      Size = 128
    end
    object cdsObjavForNaborOB_COMMENT: TStringField
      DisplayLabel = #1050#1086#1084#1084#1077#1085#1090#1072#1088#1080#1081
      FieldName = 'OB_COMMENT'
      Size = 127
    end
    object cdsObjavForNaborAG_IS_REMOTE: TSmallintField
      FieldName = 'AG_IS_REMOTE'
    end
    object cdsObjavForNaborSD_ID_COMPOUND: TStringField
      DisplayLabel = #1050#1086#1076' '#1089#1076#1077#1083#1082#1080
      FieldName = 'SD_ID_COMPOUND'
      Size = 23
    end
    object cdsObjavForNaborRB_NAME_SHORT: TStringField
      DisplayLabel = #1056#1091#1073#1088#1080#1082#1072
      FieldName = 'RB_NAME_SHORT'
      Size = 64
    end
    object cdsObjavForNaborFM_NAME: TStringField
      DisplayLabel = #1060#1086#1088#1084#1072#1090
      FieldName = 'FM_NAME'
      Size = 128
    end
    object cdsObjavForNaborGZ_NAME_SHORT: TStringField
      DisplayLabel = #1043#1072#1079#1077#1090#1072
      FieldName = 'GZ_NAME_SHORT'
      Size = 64
    end
    object cdsObjavForNaborPODACHA_NUMS: TStringField
      DisplayLabel = #1055#1086#1076#1072#1095#1080
      FieldName = 'PODACHA_NUMS'
      Size = 128
    end
    object cdsObjavForNaborCU_ID: TIntegerField
      FieldName = 'CU_ID'
      ProviderFlags = []
    end
    object cdsObjavForNaborGZ_ID: TSmallintField
      FieldName = 'GZ_ID'
    end
    object cdsObjavForNaborRB_IS_LOCKABLE: TSmallintField
      DisplayLabel = #1055#1088#1080#1086#1088#1080#1090#1077#1090
      FieldName = 'RB_IS_LOCKABLE'
      ProviderFlags = []
    end
    object cdsObjavForNaborSR_IS_CURRENT_ISSUE: TIntegerField
      DisplayLabel = #1058#1077#1082'. '#8470' '#1057#1058
      FieldName = 'SR_IS_CURRENT_ISSUE'
      ProviderFlags = []
    end
    object cdsObjavForNaborsd_num: TStringField
      FieldName = 'sd_num'
      Size = 64
    end
    object cdsObjavForNaborOB_TYPE: TIntegerField
      FieldName = 'OB_TYPE'
    end
  end
  object dsObjavForNabor: TDataSource
    DataSet = cdsObjavForNabor
    Left = 288
    Top = 64
  end
end
